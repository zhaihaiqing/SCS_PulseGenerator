
#include  "main.h"

/********************************************************************
*  功能   :初始化
*  prer   :分频数:0~7(只有低3位有效!),分频因子=4*2^prer.但最大值只能是256!
*  rlr    :重装载寄存器值:低11位有效.
* 时间计算:(大概):Tout=((4*2^prer)*rlr)/40 (ms).
			例：WDG_Init(4,2500);     //看门狗，4s
******************************************************************************/
void WDG_Init(u8 prer,u32 rlr)
{
	IWDG->KR = 0X5555;
	IWDG->PR = prer;
	IWDG->RLR = rlr;
	IWDG->KR = 0XAAAA;
	IWDG->KR = 0XCCCC;	
}

/********************************************************************
*  功能   ：喂狗
******************************************************************************/
void WDG_Feed(void)
{
	IWDG->KR = 0XAAAA;
}

/********************************************************************
*  功能   ：未使用引脚处理，配置为输出或下拉输入
			空管脚配置,谨慎.....
******************************************************************************/
void PinEmpty_Handle(void)
{
//	RCC->APB2ENR |= 1 << 2;
//	RCC->APB2ENR |= 1 << 3;
//	RCC->APB2ENR |= 1 << 4;

//	GPIOA->CRL &= 0X0F00FFFF;
//	GPIOA->CRL |= 0X30330000;
//	GPIOA->ODR |= (1 << 4) | (1 << 5) | (1 << 7);
//	
//	GPIOB->CRL &= 0X000FF000;
//	GPIOB->CRL |= 0X33300333;
//	GPIOB->CRH &= 0X00000FFF;
//	GPIOB->CRH |= 0X33333000;
//	GPIOB->ODR |= (1 << 0) | (1 << 1) | (1 << 2) | (1 << 5) | (1 << 6) | (1 << 7) | (1 << 11) | (1 << 12) | (1 << 13) | (1 << 14) | (1 << 15);
//	
//	GPIOC->CRL &= 0X0FFF00FF;
//	GPIOC->CRL |= 0X30003300;
//	GPIOC->CRH &= 0X00000000;
//	GPIOC->CRH |= 0X33333333;
//	GPIOC->ODR |= (1 << 2) | (1 << 3) | (1 << 7) | (1 << 8) | (1 << 9) | (1 << 10) | (1 << 11) | (1 << 12) | (1 << 13) | (1 << 14) | (1 << 15);
}

